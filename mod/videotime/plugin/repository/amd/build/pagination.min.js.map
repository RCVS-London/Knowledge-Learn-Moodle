{"version":3,"file":"pagination.min.js","sources":["../src/pagination.js"],"sourcesContent":["define(['jquery', 'core/templates'], function($, Templates) {\n\n    var Pagination = function(perPage, totalItems, root) {\n        this.perPage = perPage;\n        this.currentPage = 0;\n        this.totalItems = totalItems;\n        this.root = root;\n    };\n\n    Pagination.prototype.getRoot = function() {\n        return this.root;\n    };\n\n    Pagination.prototype.getContainer = function() {\n        return this.root.find('.pagination-container');\n    };\n\n    Pagination.prototype.init = function() {\n        this.getRoot().on('click', '[data-action=change-page]', function(e) {\n            var target = $(e.target);\n            var newPage = target.data('page');\n            this.setCurrentPage(newPage);\n            this.getContainer().trigger('pagination.changePage', [newPage]);\n        }.bind(this));\n\n        this.getRoot().on('change', '[data-action=jump-page]', function(e) {\n            var target = $(e.target);\n            var newPage = target.val();\n            this.setCurrentPage(newPage);\n            this.getContainer().trigger('pagination.changePage', [newPage]);\n        }.bind(this));\n    };\n\n    Pagination.prototype.getTemplateContext = function() {\n        var pages = [];\n        var pageCount = this.getPageCount();\n        var currentPage = this.getCurrentPage();\n\n        for (var i = 0; i < pageCount; i++) {\n            pages.push({\n                'index': i,\n                'label': i+1,\n                'selected': i == currentPage\n            });\n        }\n\n        return {\n            'previous_disabled': this.getCurrentPage() == 0,\n            'next_disabled': this.getCurrentPage() == this.getPageCount()-1 || !this.getPageCount(),\n            'previous_page': this.getCurrentPage()-1,\n            'next_page': this.getCurrentPage()+1,\n            'pages': pages,\n            'page_count': pageCount,\n            'total': this.totalItems\n        };\n    };\n\n    Pagination.prototype.getPageCount = function() {\n        return Math.ceil(this.totalItems / this.perPage);\n    };\n\n    Pagination.prototype.getLimitFrom = function() {\n        return this.currentPage * this.perPage;\n    };\n\n    Pagination.prototype.getCurrentPage = function() {\n        return this.currentPage;\n\n    };\n    Pagination.prototype.setCurrentPage = function(currentPage) {\n        this.currentPage = currentPage;\n\n    };\n    Pagination.prototype.setTotalItems = function(totalItems) {\n        this.totalItems = totalItems;\n    };\n\n    Pagination.prototype.render = function() {\n        Templates.render('videotimeplugin_repository/pagination', this.getTemplateContext())\n            .then(function(html) {\n                this.getContainer().html(html);\n            }.bind(this));\n    };\n\n    return Pagination;\n});\n"],"names":["define","$","Templates","Pagination","perPage","totalItems","root","currentPage","prototype","getRoot","this","getContainer","find","init","on","e","newPage","target","data","setCurrentPage","trigger","bind","val","getTemplateContext","pages","pageCount","getPageCount","getCurrentPage","i","push","Math","ceil","getLimitFrom","setTotalItems","render","then","html"],"mappings":"AAAAA,+CAAO,CAAC,SAAU,mBAAmB,SAASC,EAAGC,eAEzCC,WAAa,SAASC,QAASC,WAAYC,WACtCF,QAAUA,aACVG,YAAc,OACdF,WAAaA,gBACbC,KAAOA,aAGhBH,WAAWK,UAAUC,QAAU,kBACpBC,KAAKJ,MAGhBH,WAAWK,UAAUG,aAAe,kBACzBD,KAAKJ,KAAKM,KAAK,0BAG1BT,WAAWK,UAAUK,KAAO,gBACnBJ,UAAUK,GAAG,QAAS,4BAA6B,SAASC,OAEzDC,QADSf,EAAEc,EAAEE,QACIC,KAAK,aACrBC,eAAeH,cACfL,eAAeS,QAAQ,wBAAyB,CAACJ,WACxDK,KAAKX,YAEFD,UAAUK,GAAG,SAAU,0BAA2B,SAASC,OAExDC,QADSf,EAAEc,EAAEE,QACIK,WAChBH,eAAeH,cACfL,eAAeS,QAAQ,wBAAyB,CAACJ,WACxDK,KAAKX,QAGXP,WAAWK,UAAUe,mBAAqB,mBAClCC,MAAQ,GACRC,UAAYf,KAAKgB,eACjBnB,YAAcG,KAAKiB,iBAEdC,EAAI,EAAGA,EAAIH,UAAWG,IAC3BJ,MAAMK,KAAK,OACED,QACAA,EAAE,WACCA,GAAKrB,oBAIlB,mBAC2C,GAAzBG,KAAKiB,+BACTjB,KAAKiB,kBAAoBjB,KAAKgB,eAAe,IAAMhB,KAAKgB,6BACxDhB,KAAKiB,iBAAiB,YAC1BjB,KAAKiB,iBAAiB,QAC1BH,iBACKC,gBACLf,KAAKL,aAItBF,WAAWK,UAAUkB,aAAe,kBACzBI,KAAKC,KAAKrB,KAAKL,WAAaK,KAAKN,UAG5CD,WAAWK,UAAUwB,aAAe,kBACzBtB,KAAKH,YAAcG,KAAKN,SAGnCD,WAAWK,UAAUmB,eAAiB,kBAC3BjB,KAAKH,aAGhBJ,WAAWK,UAAUW,eAAiB,SAASZ,kBACtCA,YAAcA,aAGvBJ,WAAWK,UAAUyB,cAAgB,SAAS5B,iBACrCA,WAAaA,YAGtBF,WAAWK,UAAU0B,OAAS,WAC1BhC,UAAUgC,OAAO,wCAAyCxB,KAAKa,sBAC1DY,KAAK,SAASC,WACNzB,eAAeyB,KAAKA,OAC3Bf,KAAKX,QAGRP"}